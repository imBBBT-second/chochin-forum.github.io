<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <title>초친 포럼 (레벨 - 클래식)</title>
    <style>
      html,
      body {
        min-height: 100vh;
        height: 100%;
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        background-color: #323232;
        display: flex;
        flex-direction: column;
      }
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      @font-face {
        font-family: Paperlogy1;
        src: url('font - paperlogy/Paperlogy-1.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy2;
        src: url('font - paperlogy/Paperlogy-2.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy3;
        src: url('font - paperlogy/Paperlogy-3.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy4;
        src: url('font - paperlogy/Paperlogy-4.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy5;
        src: url('font - paperlogy/Paperlogy-5.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy6;
        src: url('font - paperlogy/Paperlogy-6.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy7;
        src: url('font - paperlogy/Paperlogy-7.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy8;
        src: url('font - paperlogy/Paperlogy-8.ttf') format('truetype');
      }
      @font-face {
        font-family: Paperlogy9;
        src: url('font - paperlogy/Paperlogy-9.ttf') format('truetype');
      }

      body {
        background-color: #323232;
        display: flex;
        flex-direction: column;
      }

      h1 {
        font-family: Paperlogy7;
        font-size: 170px;
        color: #fff;
        text-align: center;
      }
      h2 {
        font-family: Paperlogy6;
        font-size: 70px;
        color: #fff;
        text-align: center;
      }
      h3 {
        font-family: Paperlogy5;
        font-size: 50px;
        color: #fff;
        text-align: center;
      }
      h4 {
        font-family: Paperlogy3;
        font-size: 40px;
        color: #a0a0a0;
        text-align: center;
      }
      p {
        font-family: Paperlogy2;
        color: #c8c8c8;
        text-align: center;
      }
      button {
        font-family: Paperlogy5;
      }

      .header-container {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 5vw;
        padding: 2vh 0;
        flex-wrap: wrap;
      }

      .header-btn-wrapper {
        width: 400px;
        display: flex;
        justify-content: center;
      }

      .header-btn {
        background-color: #323232;
        color: white;
        font-size: clamp(2rem, 5vw, 5rem);
        cursor: pointer;
        padding: 1.5vh 0;
        border: none;
        border-radius: 10px;
        width: 100%;
        transition: background-color 0.25s ease, color 0.25s ease;
        font-family: Paperlogy5;
      }

      .header-btn:hover {
        background-color: #fff;
        color: #323232;
      }

      .divider {
        border: 2px solid white;
        width: 100%;
        height: 0;
        margin: 10px 0;
      }

      .main-container {
        display: flex;
        gap: 2%;
        padding: 2%;
        flex: 1;
        min-height: 800px;
      }

      .container {
        width: 25%;
        background: #404040;
        padding: 1.5%;
        border-radius: 10px;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      input {
        width: 100%;
        padding: 1%;
        margin-bottom: 2%;
        border: none;
        border-radius: 8px;
        font-size: 18px;
        box-sizing: border-box;
      }

      .button-wrapper {
        flex: 1;
        overflow-y: auto;
      }

      .item {
        display: flex;
        align-items: center;
        gap: 1%;
        padding: 1% 0;
        cursor: pointer;
        border-bottom: 1px solid #c0c0c0;
      }

      .item:hover {
        background: #808080;
        transition: 0.1s;
      }

      .rank {
        color: #fff;
        width: 10%;
        font-family: Paperlogy8;
        font-size: 2vw;
        text-align: center;
      }

      .info {
        flex: 1;
      }

      .title {
        font-family: Paperlogy5;
        font-size: 1.7vw;
        color: #fff;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .creator {
        font-family: Paperlogy3;
        font-size: 0.9vw;
        color: #e0e0e0;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .detail-panel {
        flex: 1;
        background: #505050;
        padding: 2%;
        border-radius: 10px;
        color: white;
        overflow-y: auto;
        display: flex;
        flex-direction: column;
      }

      .detail-panel.clears-panel {
        width: 25%;
        flex: none;
        flex-shrink: 0;
      }

      .detail-title {
        height: 3.7vw;
        display: flex;
        justify-content: center;
        align-items: center;
        margin-bottom: 1rem;
      }

      .detail-title-inner {
        white-space: nowrap;
        font-family: Paperlogy9;
        font-size: 3vw;
        transform-origin: center;
      }

      #detailVideo {
        width: 100%;
        margin: 20px 0;
        border-radius: 12px;
        display: none;
      }

      .detail-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px 16px;
      }

      .detail-grid p {
        background: #606060;
        padding: 10px;
        border-radius: 8px;
        font-family: Paperlogy3;
        font-size: 1rem !important;
        color: #fff;
        line-height: 1.4 !important;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        text-align: center;
      }

      .detail-wrapper {
        display: flex;
        gap: 2%;
        flex: 1;
      }

      .item.selected {
        background: #808080 !important;
      }

      #detailClears p {
        text-align: left !important;
        margin: 5px 0 !important;
      }

      .text-ellipsis {
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      @media (max-width: 1200px) {
        .main-container {
          flex-direction: column;
          gap: 1%;
        }

        .container,
        .detail-panel {
          width: 100% !important;
          height: auto;
          min-height: 300px;
        }

        .detail-panel.clears-panel {
          width: 100% !important;
        }

        .detail-wrapper {
          flex-direction: column;
        }
      }

      @media (max-width: 768px) {
        .header-container {
          gap: 2vw;
        }

        .detail-grid {
          grid-template-columns: 1fr;
        }

        .container {
          width: 100%;
        }
      }
    </style>
  </head>

  <body>
    <div class="header-container">
      <a
        href="../home.html"
        class="header-btn-wrapper"
        style="text-decoration: none"
      >
        <button class="header-btn">홈</button>
      </a>

      <a
        href="../level.html"
        class="header-btn-wrapper"
        style="text-decoration: none"
      >
        <button class="header-btn" style="font-family: Paperlogy9">레벨</button>
      </a>

      <div class="header-btn-wrapper">
        <button class="header-btn">하디스트</button>
      </div>
    </div>

    <div class="divider"></div>

    <div style="height: 25%; text-align: center; margin-top: 20px">
      <h1>Classic</h1>
      <p style="font-size: 32px">
        초친 멤버들이 만든 레벨들 중 20초 이상의 레벨들을 모아놓은 곳입니다.
      </p>
    </div>

    <div class="main-container">
      <div class="container">
        <input id="search" type="text" placeholder="검색" />
        <div id="list" class="button-wrapper"></div>
      </div>

      <div class="detail-panel">
        <div class="detail-title" id="detailTitle"></div>
        <p id="detailCreator" style="font-size: 200%"></p>
        <video id="detailVideo" controls>
          <source id="detailVideoSrc" src="" type="video/mp4" />
        </video>
        <div id="detailDescription" class="detail-grid"></div>
        <div id="detailFP" style="margin-top: 20px"></div>
        <h4 style="font-size: 100%; padding-top: 10px">
          ※ 프레임 퍼펙트는 정확하지 않습니다 ※
        </h4>
      </div>

      <div class="detail-panel clears-panel">
        <div
          style="
            height: 3.7vw;
            display: flex;
            justify-content: center;
            align-items: center;
          "
        >
          <span style="font-family: Paperlogy9; font-size: 2.5vw"
            >클리어 명단</span
          >
        </div>
        <div
          id="detailClears"
          style="margin-top: 20px; overflow-y: auto; flex: 1"
        ></div>
      </div>
    </div>

    <script>
      let demonData = [];

      function setDetailTitle(text) {
        const container = document.getElementById('detailTitle');
        container.innerHTML = `<span class="detail-title-inner">${text}</span>`;
        const inner = container.querySelector('.detail-title-inner');
        const maxWidth = container.clientWidth;
        const realWidth = inner.scrollWidth;
        let scale = maxWidth / realWidth;
        if (scale > 1) scale = 1;
        inner.style.transform = 'scale(' + scale + ')';
      }

      function setDetailDescriptionScale(row, text) {
        row.innerHTML = `<span class="detail-text-inner">${text}</span>`;
        const inner = row.querySelector('.detail-text-inner');
        const maxWidth = row.clientWidth;
        const realWidth = inner.scrollWidth;
        let scale = maxWidth / realWidth;
        if (scale > 1) scale = 1;
        inner.style.transform = 'scale(' + scale + ')';
      }

      function showDetail(item) {
        setDetailTitle(item.title);
        document.getElementById('detailCreator').textContent =
          'by ' + item.creator + ' / Verified by ' + item.verifier;

        const box = document.getElementById('detailDescription');
        box.innerHTML = '';

        const video = document.getElementById('detailVideo');
        const videoSrc = document.getElementById('detailVideoSrc');
        if (item.video) {
          videoSrc.src = item.video;
          video.style.display = 'block';
          video.load();
        } else {
          video.style.display = 'none';
        }

        if (item.details) {
          for (const key in item.details) {
            const value = item.details[key];
            const row = document.createElement('p');
            setDetailDescriptionScale(
              row,
              `<span style="font-size:150%;"><b>${key}</b> : ${value}</span>`
            );
            box.appendChild(row);
          }
        } else {
          box.innerHTML = '<p style="font-size:300%;color:red;">정보 없음</p>';
        }

        const fpBox = document.getElementById('detailFP');
        fpBox.innerHTML = '';
        if (item['fp'] && item['fp'].length > 0) {
          const fpsLabels = ['30fps', '60fps', '120fps', '240fps', '?'];
          const fpTitle = document.createElement('p');
          fpTitle.innerHTML =
            '<span style="font-size:200%; font-family:Paperlogy7">프레임 퍼펙트 상세 정보</span>';
          fpBox.appendChild(fpTitle);
          item['fp'].forEach((fp, idx) => {
            const fpItem = document.createElement('p');
            fpItem.innerHTML = `<span style="font-size:150%; color: #c8c8c8; font-family:Paperlogy3;">${fpsLabels[idx]} : ${fp}개</span>`;
            fpBox.appendChild(fpItem);
          });
        } else {
          fpBox.innerHTML =
            '<p style="font-size:150%;color:#aaa;">프레임 퍼펙트 없음</p>';
        }

        if (item['fp_note']) {
          const note = document.createElement('p');
          note.innerHTML = `<span style="font-size:150%; font-family:Paperlogy3; color:#c8c8c8;"><b>FP 비고</b> : </span><span style="font-size:120%; font-family:Paperlogy3; color:#c8c8c8;">${item['fp_note']}</span>`;
          fpBox.appendChild(note);
        }

        const clearBox = document.getElementById('detailClears');
        clearBox.innerHTML = '';

        if (item.clears && item.clears.length > 0) {
          item.clears.forEach((clear, idx) => {
            const rank = idx + 1;
            let rankColor = '#ffffff';
            if (rank === 1) rankColor = '#ffd700';
            else if (rank === 2) rankColor = '#87ceeb';
            else if (rank === 3) rankColor = '#cd853f';

            const clearItem = document.createElement('p');
            clearItem.style.margin = '8px 0';

            clearItem.innerHTML = `
      <span style="font-size:300%; font-family: Paperlogy7; color:${rankColor}; margin-right: 10px;">
        ${rank}
      </span>
      <span style="font-size:180%; font-family: Paperlogy5; color:#fff;">
        ${clear}
      </span>
    `;

            clearBox.appendChild(clearItem);
          });
        } else {
          clearBox.innerHTML =
            '<p style="font-size:200%; color:#aaa; text-align:center !important;">클리어 없음</p>';
        }
      }

      fetch('classic.json')
        .then((res) => res.json())
        .then((json) => {
          demonData = json.buttons;
          generateList(demonData);
          if (demonData.length > 0) {
            showDetail(demonData[0]);
            document.querySelector('.item').classList.add('selected');
          }
        });

      function generateList(data) {
        const list = document.getElementById('list');
        list.innerHTML = '';
        data.forEach((item) => {
          const div = document.createElement('div');
          div.className = 'item';
          div.innerHTML = `
            <div class="rank">${item.id}</div>
            <div class="info">
              <div class="title">${item.title}</div>
              <div class="creator">by ${item.creator}</div>
            </div>
          `;
          div.addEventListener('click', () => {
            document
              .querySelectorAll('.item')
              .forEach((i) => i.classList.remove('selected'));
            div.classList.add('selected');
            showDetail(item);
          });
          list.appendChild(div);
        });
      }

      document.getElementById('search').addEventListener('input', () => {
        const text = search.value.toLowerCase();
        const filtered = demonData.filter((d) =>
          d.title.toLowerCase().includes(text)
        );
        generateList(filtered);
        if (filtered.length > 0) {
          showDetail(filtered[0]);
          document.querySelector('.item').classList.add('selected');
        }
      });
    </script>
    <h4>크레딧</h4>
    <p style="font-size: 30px; color: #808080">제작 : 초코, 앞티</p>
  </body>
</html>
