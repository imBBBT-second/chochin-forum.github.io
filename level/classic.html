<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="user-scalable=no, initial-scale=1.0" />
    <meta charset="UTF-8" />
    <title>초친 포럼 (레벨 - 클래식)</title>

    <style>
      /* ================= 기본 리셋 ================= */
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        color: inherit;
        font-family: inherit;
      }

      html, body {
        min-height: 100vh;
        background-color: #323232;
        color: #eaeaea;
        font-family: Paperlogy4;
      }

      /* ================= 폰트 ================= */
      @font-face { font-family: Paperlogy1; src: url('font - paperlogy/Paperlogy-1.ttf'); }
      @font-face { font-family: Paperlogy2; src: url('font - paperlogy/Paperlogy-2.ttf'); }
      @font-face { font-family: Paperlogy3; src: url('font - paperlogy/Paperlogy-3.ttf'); }
      @font-face { font-family: Paperlogy4; src: url('font - paperlogy/Paperlogy-4.ttf'); }
      @font-face { font-family: Paperlogy5; src: url('font - paperlogy/Paperlogy-5.ttf'); }
      @font-face { font-family: Paperlogy6; src: url('font - paperlogy/Paperlogy-6.ttf'); }
      @font-face { font-family: Paperlogy7; src: url('font - paperlogy/Paperlogy-7.ttf'); }
      @font-face { font-family: Paperlogy8; src: url('font - paperlogy/Paperlogy-8.ttf'); }
      @font-face { font-family: Paperlogy9; src: url('font - paperlogy/Paperlogy-9.ttf'); }

      /* ================= 텍스트 ================= */
      h1 {
        font-family: Paperlogy7;
        font-size: 170px;
        color: #ffffff;
        text-align: center;
      }

      h4 {
        font-family: Paperlogy3;
        font-size: 40px;
        color: #a0a0a0;
        text-align: center;
      }

      p {
        font-family: Paperlogy3;
        color: #d0d0d0;
      }

      /* ================= 링크 / 버튼 ================= */
      a {
        color: inherit;
        text-decoration: none;
      }

      button {
        font-family: Paperlogy5;
        color: #ffffff;
      }

      input {
        font-family: Paperlogy3;
        color: #ffffff;
        background: #555;
      }

      /* ================= 레이아웃 ================= */
      .header-container {
        display: flex;
        justify-content: center;
        gap: 5vw;
        padding: 2vh 0;
      }

      .header-btn {
        background-color: #323232;
        font-size: clamp(2rem, 5vw, 5rem);
        border: none;
        border-radius: 10px;
        padding: 1.5vh 3vw;
        cursor: pointer;
      }

      .divider {
        border: 2px solid white;
        margin: 10px 0;
      }

      .main-container {
        display: flex;
        gap: 2%;
        padding: 2%;
        height: calc(100vh - 350px);
      }

      .container {
        width: 25%;
        background: #404040;
        padding: 1.5%;
        border-radius: 10px;
        overflow-y: auto;
      }

      .detail-panel {
        flex: 1;
        background: #505050;
        padding: 2%;
        border-radius: 10px;
        overflow-y: auto;
      }

      .detail-panel.clears-panel {
        width: 25%;
      }

      /* ================= 리스트 ================= */
      .item {
        display: flex;
        gap: 10px;
        padding: 10px;
        border-bottom: 1px solid #666;
        cursor: pointer;
      }

      .rank {
        font-family: Paperlogy8;
        font-size: 1.8vw;
        color: #ffffff;
        width: 15%;
        text-align: center;
      }

      .title {
        font-family: Paperlogy5;
        font-size: 1.5vw;
        color: #ffffff;
      }

      .creator {
        font-family: Paperlogy3;
        font-size: 0.9vw;
        color: #cccccc;
      }

      /* ================= 상세 ================= */
      .section {
        background: #444;
        padding: 12px;
        border-radius: 8px;
        margin-bottom: 10px;
      }

      .section-title {
        font-family: Paperlogy6;
        font-size: 22px;
        color: #ffffff;
        margin-bottom: 6px;
      }

      .tag {
        background: #666;
        padding: 4px 8px;
        border-radius: 6px;
        margin: 3px;
        display: inline-block;
        font-family: Paperlogy4;
        color: #ffffff;
      }
    </style>
  </head>

  <body>
    <div class="header-container">
      <a href="../index.html"><button class="header-btn">홈</button></a>
      <a href="../level.html"><button class="header-btn">레벨</button></a>
      <button class="header-btn">하디스트</button>
    </div>

    <div class="divider"></div>

    <h1>Classic</h1>
    <p style="text-align:center; font-size:32px;">
      초친 멤버들이 만든 레벨들 중 20초 이상의 레벨들을 모아놓은 곳입니다.
    </p>

    <div class="main-container">
      <div class="container" id="list"></div>
      <div class="detail-panel" id="detailDescription"></div>
      <div class="detail-panel clears-panel" id="detailClears"></div>
    </div>

    <h4>크레딧</h4>
    <p style="text-align:center; font-size:30px; color:#808080">제작 : 초코, 앞티</p>

<script>
let demonData = [];

function bar(name, value) {
  return `
  <div class="bar-row">
    <span>${name}</span>
    <div class="bar-bg"><div class="bar-fill" style="width:${value}%"></div></div>
    <span>${value}%</span>
  </div>`;
}

function showDetail(item) {
  detailTitle.innerHTML = `<span class="detail-title-inner">${item.title}</span>`;
  detailCreator.textContent =
    item.creator === item.verifier
    ? `by ${item.creator}`
    : `by ${item.creator} / Verified by ${item.verifier}`;

  detailVideo.src = item.video || '';
  detailDescription.innerHTML = '';

  if (item.map) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">맵 정보</div>
      <div class="info-row"><span>ID</span><span>${item.map.mapId}</span></div>
      <div class="info-row"><span>길이</span><span>${item.map.length}</span></div>
      <div class="info-row"><span>오브젝트</span><span>${item.map.objects}</span></div>
      <div class="info-row"><span>업로드</span><span>${item.map.uploadDate}</span></div>
    </div>`;
  }

  if (item.gameplay) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">게임플레이</div>
      ${Object.entries(item.gameplay.modeRatio||{}).map(([k,v])=>bar(k,v)).join('')}
      ${Object.entries(item.gameplay.speedRatio||{}).map(([k,v])=>bar(k,v)).join('')}
    </div>`;
  }

  if (item.framePerfect) {
    const f = item.framePerfect.fps || {};
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">프레임 퍼펙트</div>
      <div class="fp-bars">
        ${[30,60,120,240].map(n=>`
          <div class="fp-bar" style="height:${Math.max((f[n]||0)*3,6)}px">
            ${n}<br>${f[n]||0}
          </div>`).join('')}
      </div>
    </div>`;
  }

  detailClears.innerHTML = item.clears?.length
    ? item.clears.map((c,i)=>`<p>${i+1}. ${c}</p>`).join('')
    : '<p style="color:#aaa;text-align:center">클리어 없음</p>';
}

function generateList(data) {
  list.innerHTML = '';
  data.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="rank">${item.id}</div>
      <div>
        <div class="title">${item.title}</div>
        <div class="creator">by ${item.creator}</div>
      </div>`;
    div.onclick = ()=>showDetail(item);
    list.appendChild(div);
  });
}

fetch('classic.json')
  .then(r=>r.json())
  .then(j=>{
    demonData = j.buttons;
    generateList(demonData);
    if (demonData.length) showDetail(demonData[0]);
  });

search.oninput = ()=>{
  const t = search.value.toLowerCase();
  generateList(demonData.filter(d=>d.title.toLowerCase().includes(t)));
};
</script>

</body>
</html>

