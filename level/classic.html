<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0">
<title>초친 포럼 (레벨 - 클래식)</title>

<style>
/* ===== 기본 ===== */
html, body {
  min-height: 100vh;
  margin: 0;
  background: #323232;
  display: flex;
  flex-direction: column;
}

* {
  box-sizing: border-box;
  color: inherit;
}

/* ===== 폰트 ===== */
@font-face { font-family: Paperlogy1; src: url('font - paperlogy/Paperlogy-1.ttf'); }
@font-face { font-family: Paperlogy2; src: url('font - paperlogy/Paperlogy-2.ttf'); }
@font-face { font-family: Paperlogy3; src: url('font - paperlogy/Paperlogy-3.ttf'); }
@font-face { font-family: Paperlogy4; src: url('font - paperlogy/Paperlogy-4.ttf'); }
@font-face { font-family: Paperlogy5; src: url('font - paperlogy/Paperlogy-5.ttf'); }
@font-face { font-family: Paperlogy6; src: url('font - paperlogy/Paperlogy-6.ttf'); }
@font-face { font-family: Paperlogy7; src: url('font - paperlogy/Paperlogy-7.ttf'); }
@font-face { font-family: Paperlogy8; src: url('font - paperlogy/Paperlogy-8.ttf'); }
@font-face { font-family: Paperlogy9; src: url('font - paperlogy/Paperlogy-9.ttf'); }

/* ===== 공통 텍스트 ===== */
h1 {
  font-family: Paperlogy7;
  font-size: 160px;
  color: #fff;
  text-align: center;
}

p {
  font-family: Paperlogy3;
  color: #c8c8c8;
  text-align: center;
}

/* ===== 헤더 ===== */
.header-container {
  display: flex;
  justify-content: center;
  gap: 5vw;
  padding: 2vh 0;
}

.header-btn-wrapper { width: 400px; }

.header-btn {
  width: 100%;
  padding: 1.5vh 0;
  background: #323232;
  border: none;
  border-radius: 10px;
  font-family: Paperlogy6;
  font-size: clamp(2rem, 5vw, 5rem);
  color: #fff;
  cursor: pointer;
}

a { text-decoration: none; color: inherit; }

.divider {
  border: 2px solid #fff;
  margin: 10px 0;
}

/* ===== 메인 ===== */
.main-container {
  flex: 1;
  display: flex;
  gap: 2%;
  padding: 2%;
  min-height: 800px;
}

/* 좌 / 우 동일 */
.container,
.clears-panel {
  width: 28%;
  background: #404040;
  border-radius: 10px;
  padding: 1.5%;
  overflow-y: auto;
}

/* 중앙 */
.detail-panel {
  flex: 1;
  background: #505050;
  border-radius: 10px;
  padding: 2%;
  overflow-y: auto;
}

/* ===== 리스트 ===== */
input {
  width: 100%;
  padding: 10px;
  border-radius: 8px;
  border: none;
  margin-bottom: 10px;
  font-family: Paperlogy4;
  font-size: 18px;
}

.item {
  display: flex;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px solid #888;
  cursor: pointer;
}

.rank {
  width: 50px;
  text-align: center;
  font-family: Paperlogy8;
  font-size: 26px;
  color: #fff;
}

.title {
  font-family: Paperlogy6;
  font-size: 22px;
  color: #fff;
}

.creator {
  font-family: Paperlogy3;
  font-size: 14px;
  color: #ccc;
}

/* ===== 상세 ===== */
.detail-title-inner {
  font-family: Paperlogy9;
  font-size: 48px;
  color: #fff;
}

#detailCreator {
  font-family: Paperlogy4;
  font-size: 26px;
  color: #ddd;
  margin-bottom: 10px;
}

/* 영상 */
.video-wrapper {
  position: relative;
  width: 100%;
  padding-top: 56.25%;
  margin-bottom: 15px;
}

.video-wrapper iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: none;
}

/* ===== 섹션 ===== */
.section {
  background: #444;
  border-radius: 8px;
  padding: 12px;
  margin-bottom: 12px;
}

.section-title {
  font-family: Paperlogy6;
  font-size: 22px;
  color: #fff;
  margin-bottom: 8px;
}

/* 가로 정보 */
.info-row {
  display: flex;
  justify-content: space-between;
  font-family: Paperlogy3;
  font-size: 16px;
  color: #ccc;
}

/* ===== 바 그래프 ===== */
.bar-row {
  display: grid;
  grid-template-columns: 70px 1fr 60px;
  gap: 8px;
  align-items: center;
  margin: 6px 0;
}

.bar-bg {
  background: #333;
  height: 12px;
  border-radius: 6px;
  overflow: hidden;
}

.bar-fill {
  height: 100%;
  background: linear-gradient(90deg, #5fd3ff, #4aa3ff);
}

/* ===== FP ===== */
.fp-bars {
  display: flex;
  align-items: flex-end;
  gap: 10px;
  height: 90px;
  margin-top: 10px;
}

.fp-bar {
  flex: 1;
  background: #6aa8ff;
  border-radius: 6px 6px 0 0;
  text-align: center;
  font-family: Paperlogy4;
  font-size: 13px;
  color: #fff;
}

/* 태그 */
.tag {
  display: inline-block;
  background: #666;
  padding: 4px 8px;
  border-radius: 6px;
  font-family: Paperlogy4;
  font-size: 14px;
  color: #fff;
  margin: 3px;
}
</style>
</head>

<body>

<!-- 헤더 -->
<div class="header-container">
  <a href="../index.html" class="header-btn-wrapper"><button class="header-btn">홈</button></a>
  <a href="../level.html" class="header-btn-wrapper"><button class="header-btn">레벨</button></a>
  <div class="header-btn-wrapper"><button class="header-btn">하디스트</button></div>
</div>

<div class="divider"></div>

<h1>Classic</h1>
<p style="font-size:32px">20초 이상 레벨 모음</p>

<!-- 메인 -->
<div class="main-container">

  <!-- 왼쪽 -->
  <div class="container">
    <input id="search" placeholder="검색">
    <div id="list"></div>
  </div>

  <!-- 상세 -->
  <div class="detail-panel">
    <div id="detailTitle"></div>
    <p id="detailCreator"></p>
    <div class="video-wrapper"><iframe id="detailVideo"></iframe></div>
    <div id="detailDescription"></div>
  </div>

  <!-- 클리어 -->
  <div class="clears-panel">
    <p style="font-family:Paperlogy7;font-size:28px;color:#fff">클리어 명단</p>
    <div id="detailClears"></div>
  </div>

</div>

<script>
let demonData = [];

function bar(name, value) {
  return `
  <div class="bar-row">
    <span>${name}</span>
    <div class="bar-bg"><div class="bar-fill" style="width:${value}%"></div></div>
    <span>${value}%</span>
  </div>`;
}

function showDetail(item) {
  detailTitle.innerHTML = `<span class="detail-title-inner">${item.title}</span>`;
  detailCreator.textContent =
    item.creator === item.verifier
    ? `by ${item.creator}`
    : `by ${item.creator} / Verified by ${item.verifier}`;

  detailVideo.src = item.video || '';
  detailDescription.innerHTML = '';

  if (item.map) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">맵 정보</div>
      <div class="info-row"><span>ID</span><span>${item.map.mapId}</span></div>
      <div class="info-row"><span>길이</span><span>${item.map.length}</span></div>
      <div class="info-row"><span>오브젝트</span><span>${item.map.objects}</span></div>
      <div class="info-row"><span>업로드</span><span>${item.map.uploadDate}</span></div>
    </div>`;
  }

  if (item.gameplay) {
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">게임플레이</div>
      ${Object.entries(item.gameplay.modeRatio||{}).map(([k,v])=>bar(k,v)).join('')}
      ${Object.entries(item.gameplay.speedRatio||{}).map(([k,v])=>bar(k,v)).join('')}
    </div>`;
  }

  if (item.framePerfect) {
    const f = item.framePerfect.fps || {};
    detailDescription.innerHTML += `
    <div class="section">
      <div class="section-title">프레임 퍼펙트</div>
      <div class="fp-bars">
        ${[30,60,120,240].map(n=>`
          <div class="fp-bar" style="height:${Math.max((f[n]||0)*3,6)}px">
            ${n}<br>${f[n]||0}
          </div>`).join('')}
      </div>
    </div>`;
  }

  detailClears.innerHTML = item.clears?.length
    ? item.clears.map((c,i)=>`<p>${i+1}. ${c}</p>`).join('')
    : '<p style="color:#aaa;text-align:center">클리어 없음</p>';
}

function generateList(data) {
  list.innerHTML = '';
  data.forEach(item=>{
    const div = document.createElement('div');
    div.className = 'item';
    div.innerHTML = `
      <div class="rank">${item.id}</div>
      <div>
        <div class="title">${item.title}</div>
        <div class="creator">by ${item.creator}</div>
      </div>`;
    div.onclick = ()=>showDetail(item);
    list.appendChild(div);
  });
}

fetch('classic.json')
  .then(r=>r.json())
  .then(j=>{
    demonData = j.buttons;
    generateList(demonData);
    if (demonData.length) showDetail(demonData[0]);
  });

search.oninput = ()=>{
  const t = search.value.toLowerCase();
  generateList(demonData.filter(d=>d.title.toLowerCase().includes(t)));
};
</script>

</body>
</html>
